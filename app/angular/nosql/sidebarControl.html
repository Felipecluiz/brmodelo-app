<aside class="model-properties" data-ng-class="{'active': $ctrl.visible}">
	<span class="action" data-ng-click="$ctrl.changeVisible()">
		<i
			class="fa angle-double-icon"
			data-ng-class="!$ctrl.visible ? 'fa-angle-double-left' : 'fa-angle-double-right'"
		></i>
	</span>

	<!-- Collection properties -->
	<div class="properties-content" ng-if="$ctrl.selectedElement != null">
		<section class="sidebar-panel">
			<header
				class="panel-header"
				ng-click="$ctrl.toggleSection('tableProperties')"
			>
				<h3>{{ 'Collection properties' | translate }}</h3>
				<i
					class="fa"
					data-ng-class="$ctrl.sections.tableProperties ? 'fa-chevron-up' : 'fa-chevron-down'"
					aria-hidden="true"
				></i>
			</header>
			<div class="panel-content" ng-show="$ctrl.sections.tableProperties">
				<div class="form-group">
					<label for="entry-name">{{ 'Name' | translate }}</label>
					<input
						id="entry-name"
						type="text"
						class="form-control"
						data-ng-model="$ctrl.selectedElement.name"
						ng-change="$ctrl.updateName($ctrl.selectedElement.name)"
						autofocus
					/>
				</div>
			</div>
			<!-- End .panel-content -->
		</section>
		<!-- End .sidebar-panel-->

		<section
			class="sidebar-panel"
			ng-if="$ctrl.configuration && $ctrl.configuration.collection && $ctrl.visible && $ctrl.selectedElement && $ctrl.selectedElement.containerType === 'block'"
		>
			<header
				class="panel-header"
				ng-click="$ctrl.toggleSection('cardinality')"
			>
				<h3>{{ 'Cardinality' | translate }}</h3>
				<i
					class="fa"
					data-ng-class="$ctrl.sections.cardinality ? 'fa-chevron-up' : 'fa-chevron-down'"
					aria-hidden="true"
				></i>
			</header>
			<div class="panel-content" ng-show="$ctrl.sections.cardinality">
				<div class="collection-cardinality">
					<div class="checkbox">
						<label for="collection-cardinality-checkbox">
							<input
								id="collection-cardinality-checkbox"
								type="checkbox"
								ng-model="$ctrl.selectedElement.cardinalityEnabled"
								ng-change="$ctrl.updateCollectionCardinality()"
							/>
							{{ 'Block cardinality' | translate }}
						</label>
					</div>
					<div
						class="cardinality-options card-item"
						ng-if="$ctrl.selectedElement.cardinalityEnabled"
					>
						<label
							>{{ 'Minimum' | translate }}
							<input
								type="number"
								min="0"
								class="form-control"
								ng-model="$ctrl.selectedElement.minCardinality"
								ng-change="$ctrl.updateCollectionCardinality()"
								placeholder="{{ 'min.' | translate }}"
							/>
						</label>
						<label
							>{{ 'Maximum' | translate }}
							<input
								type="text"
								class="form-control"
								ng-model="$ctrl.selectedElement.maxCardinality"
								ng-change="$ctrl.updateCollectionCardinality()"
								ng-pattern="/^[0-9nN]*$/"
								ng-keypress="($event.charCode >= 48 && $event.charCode <= 57) || $event.charCode === 110 || $event.charCode === 78 || $event.charCode === 0 || $event.preventDefault()"
								placeholder="{{ 'max.' | translate }}"
							/>
							<small>{{ 'Use N for unlimited' | translate }}</small>
						</label>
					</div>
					<!-- End .cardinality-options -->
				</div>
				<!-- End .collection-cardinality-->
			</div>
			<!-- End .panel-content -->
		</section>
		<!-- End .sidebar-panel-->

		<section class="sidebar-panel">
			<header class="panel-header" ng-click="$ctrl.toggleSection('attributes')">
				<h3>{{ 'Attributes' | translate }}</h3>
				<i
					class="fa"
					data-ng-class="$ctrl.sections.attributes ? 'fa-chevron-up' : 'fa-chevron-down'"
					aria-hidden="true"
				></i>
			</header>
			<div class="panel-content" ng-show="$ctrl.sections.attributes">
				<!-- List of existing attributes -->
				<div
					class="attributes-list"
					ng-show="$ctrl.getCustomAttributes().length > 0"
				>
					<div
						class="attribute-item"
						ng-class="{expanded: attr.expanded}"
						ng-repeat="attr in $ctrl.getCustomAttributes() track by $index"
						ng-init="attr.expanded = false"
					>
						<!-- Compact summary view -->
						<div
							class="attribute-item-summary"
							ng-click="attr.expanded = !attr.expanded"
						>
							<span class="attribute-name">{{ attr.name }}</span>
							<span class="attribute-type">{{ attr.type }}</span>
							<span
								class="attribute-cardinality"
								ng-if="attr.cardinalityEnabled"
							>
								({{ attr.minCardinality || 0 }}, {{ attr.maxCardinality || 'n'
								}})
							</span>
							<i
								class="fa fa-chevron-down expand-icon"
								ng-class="{expanded: attr.expanded}"
							></i>
						</div>

						<!-- Expanded edit form -->
						<div class="attribute-item-form" ng-show="attr.expanded">
							<div class="form-row">
								<input
									type="text"
									class="form-control"
									ng-model="attr.name"
									ng-change="$ctrl.updateAttributeName($index, attr.name)"
									placeholder="{{ 'Name' | translate }}"
								/>
								<select
									class="form-control"
									ng-model="attr.type"
									ng-change="$ctrl.updateAttributeType($index, attr.type)"
								>
									<option value="int">{{ 'int' | translate }}</option>
									<option value="string">{{ 'string' | translate }}</option>
									<option value="float">{{ 'float' | translate }}</option>
									<option value="array">{{ 'array' | translate }}</option>
								</select>
							</div>

							<div class="cardinality-section">
								<div class="cardinality-header">
									<label>
										<input
											type="checkbox"
											ng-model="attr.cardinalityEnabled"
											ng-change="$ctrl.updateAttributeCardinality($index)"
										/>
										{{ 'Cardinality' | translate }}
									</label>
								</div>
								<div class="cardinality-fields" ng-if="attr.cardinalityEnabled">
									<input
										type="text"
										class="form-control"
										ng-model="attr.minCardinality"
										ng-change="$ctrl.updateAttributeCardinality($index)"
										placeholder="{{ 'min.' | translate }}"
									/>
									<input
										type="text"
										class="form-control"
										ng-model="attr.maxCardinality"
										ng-change="$ctrl.updateAttributeCardinality($index)"
										placeholder="{{ 'max.' | translate }}"
									/>
								</div>
							</div>
							<footer class="card-item-actions">
								<button
									class="br-button destructive"
									ng-click="$ctrl.removeAttribute($index)"
								>
									{{ 'Delete' | translate }}
								</button>
							</footer>
						</div>
					</div>
				</div>

				<!-- Add new attribute -->
				<div class="card-item">
					<div class="column-form">
						<div class="individual-attribute">
							<div class="form-group">
								<label for="attribute-name">{{ 'Name' | translate }}</label>
								<input
									id="attribute-name"
									class="form-control"
									type="text"
									ng-model="$ctrl.newAttributeName"
									placeholder="{{ 'Enter attribute name' | translate }}"
								/>
							</div>
							<div class="form-group">
								<label for="">{{ 'Type' | translate }}</label>
								<select
									id="attribute-type"
									class="form-control"
									ng-model="$ctrl.newAttributeType"
									ng-init="$ctrl.newAttributeType = 'string'"
								>
									<option value="int">{{ 'int' | translate }}</option>
									<option value="string">{{ 'string' | translate }}</option>
									<option value="float">{{ 'float' | translate }}</option>
									<option value="array">{{ 'array' | translate }}</option>
								</select>
							</div>
						</div>
						<!-- Attribute cardinality -->
						<div class="card-item">
							<div class="column-form">
								<div class="checkbox-header">
									<label for="enable-attribute-cardinality"
										>{{ 'Cardinality' | translate }}</label
									>
									<input
										id="enable-attribute-cardinality"
										type="checkbox"
										ng-model="$ctrl.newAttributeCardinalityEnabled"
									/>
								</div>
								<div
									class="cardinality-options mt12"
									ng-if="$ctrl.newAttributeCardinalityEnabled"
								>
									<label
										>{{ 'Minimum' | translate }}
										<input
											type="number"
											min="0"
											class="form-control"
											ng-model="$ctrl.newAttributeMinCardinality"
											placeholder="{{ 'min.' | translate }}"
										/>
									</label>
									<label
										>{{ 'Maximum' | translate }}
										<input
											type="text"
											class="form-control"
											ng-model="$ctrl.newAttributeMaxCardinality"
											ng-pattern="/^[0-9nN]*$/"
											ng-keypress="($event.charCode >= 48 && $event.charCode <= 57) || $event.charCode === 110 || $event.charCode === 78 || $event.charCode === 0 || $event.preventDefault()"
											placeholder="{{ 'max.' | translate }}"
										/>
										<small>{{ 'Use N for unlimited' | translate }}</small>
									</label>
								</div>
								<!-- End .cardinality-options -->
							</div>
							<!-- End .column-form -->
						</div>
						<!-- End .card-item -->

						<div class="actions">
							<button
								class="br-button br-button--full"
								ng-click="$ctrl.addAttribute()"
							>
								{{ 'Add' | translate }}
							</button>
						</div>
						<!-- End .actions -->
					</div>
					<!-- End .column-form -->
				</div>
				<!-- End. card-item-->
			</div>
			<!-- End .panel-content -->
		</section>
		<!-- End .sidebar-panel-->
	</div>
	<!-- End .properties-content-->
</aside>
